<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Windows Update Catalog</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body id="menu" onload="loadPage()">
  <h1>Windows Update Archive</h1>

  <script>
  function loadPage() {
    fetch('upd.txt')
    .then(function(response) {
      return response.text();
    })
    .then(function(textString) {
        //Split the csv into rows
        var rows = textString.split('\n');
        for (var i = 0; i < rows.length; i++) {
          //Split the row into each of the comma separated values
          var row = rows[i].split(',');
          var node = document.createElement("a");
          node.setAttribute('href', 'https://archive.org/download/windows-update-archive/' + row);
          node.innerText = row;
          document.getElementById("menu").appendChild(node);
          var nl = document.createElement("br");
          document.getElementById("menu").appendChild(nl);
        }
        console.log("Done");
    });

    // Prevent default behavior on links
    var links = document.getElementsByTagName("a");
    for (var i = 0; i < links.length; i++) {
      links[i].onclick = function() {
        window.event.returnValue = false;
      };
    }
  }
  </script>
</body>
</html>
